<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | 嘉宇的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around!">
    
    <link rel="preload" href="/blog/assets/css/0.styles.1bab4386.css" as="style"><link rel="preload" href="/blog/assets/js/app.1ee1e97c.js" as="script"><link rel="preload" href="/blog/assets/js/2.dc5a3d57.js" as="script"><link rel="preload" href="/blog/assets/js/12.c58279b7.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.965aa3b2.js"><link rel="prefetch" href="/blog/assets/js/11.5c5c3d3c.js"><link rel="prefetch" href="/blog/assets/js/13.f732edc2.js"><link rel="prefetch" href="/blog/assets/js/3.ab767734.js"><link rel="prefetch" href="/blog/assets/js/4.43879640.js"><link rel="prefetch" href="/blog/assets/js/5.60572b82.js"><link rel="prefetch" href="/blog/assets/js/6.22f00265.js"><link rel="prefetch" href="/blog/assets/js/7.b2fd558b.js"><link rel="prefetch" href="/blog/assets/js/8.a267b745.js"><link rel="prefetch" href="/blog/assets/js/9.b49b8212.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1bab4386.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">嘉宇的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  导引
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link router-link-active">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jiayu1011" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  导引
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link router-link-active">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jiayu1011" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#设计模式" class="sidebar-link">设计模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#生命周期" class="sidebar-link">*生命周期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#组件间通信" class="sidebar-link">组件间通信</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#vue的响应式原理" class="sidebar-link">**Vue的响应式原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#什么是响应式" class="sidebar-link">什么是响应式？</a></li><li class="sidebar-sub-header"><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#vue2-vue3实现响应式的区别" class="sidebar-link">Vue2/Vue3实现响应式的区别</a></li><li class="sidebar-sub-header"><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#vue2响应式原理" class="sidebar-link">Vue2响应式原理</a></li><li class="sidebar-sub-header"><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#vue3响应式原理-读了源码的getter-track等方法" class="sidebar-link">Vue3响应式原理（读了源码的getter, track等方法）</a></li></ul></li><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#virtual-dom" class="sidebar-link">Virtual DOM</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#diff算法" class="sidebar-link">Diff算法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#vue3特性" class="sidebar-link">Vue3特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/vue/Vue%E5%9F%BA%E7%A1%80.html#composition-api" class="sidebar-link">Composition API</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h1> <h2 id="设计模式"><a href="#设计模式" class="header-anchor">#</a> 设计模式</h2> <p>MVVM？（vue，react，angular）</p> <p>Model View View-Model，核心枢纽是View-Model这一层，使得各部分之间通信都是双向的（双向绑定）；</p> <p>MVC则是单向的数据传递</p> <h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> *生命周期</h2> <ul><li>beforeCreate</li> <li>created</li> <li>beforeMount</li> <li>mounted</li> <li>beforeUpdate</li> <li>updated</li> <li>beforeDestroy</li> <li>destroyed</li></ul> <p>通常在created或mounted进行数据请求，created此时已经拿到data了</p> <h2 id="组件间通信"><a href="#组件间通信" class="header-anchor">#</a> 组件间通信</h2> <h6 id="父传子"><a href="#父传子" class="header-anchor">#</a> 父传子</h6> <p>父组件使用<code>v-bind</code>，子组件中使用<code>props</code>接收</p> <h6 id="子传父"><a href="#子传父" class="header-anchor">#</a> 子传父</h6> <p>子组件使用<code>$emit</code>触发一个事件进行传值，父组件使用<code>v-on</code>，进行事件监听，在回调函数中取值</p> <h6 id="eventbus"><a href="#eventbus" class="header-anchor">#</a> EventBus</h6> <p>利用一个新的Event作为Vue空实例，将<code>emit</code>和<code>on</code>挂载上去，实现任意两个组件传值</p> <h6 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h6> <h2 id="vue的响应式原理"><a href="#vue的响应式原理" class="header-anchor">#</a> **Vue的响应式原理</h2> <h3 id="什么是响应式"><a href="#什么是响应式" class="header-anchor">#</a> 什么是响应式？</h3> <p>数据驱动视图的自动更新，修改数据也会更新用到这份数据的视图</p> <h3 id="vue2-vue3实现响应式的区别"><a href="#vue2-vue3实现响应式的区别" class="header-anchor">#</a> Vue2/Vue3实现响应式的区别</h3> <ul><li>Vue2的响应式是基于<code>Object.defineProperty</code>实现的</li> <li>Vue3的响应式是基于ES6的<code>Proxy</code>来实现的</li></ul> <h3 id="vue2响应式原理"><a href="#vue2响应式原理" class="header-anchor">#</a> Vue2响应式原理</h3> <h5 id="核心思想"><a href="#核心思想" class="header-anchor">#</a> 核心思想</h5> <p>用<code>Obejct.defineProperty</code>为对象每个属性设置getter/setter实现数据拦截</p> <h5 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h5> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">189</span><span class="token punctuation">,</span>
    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> oldArrayProto <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token keyword">const</span> newArrayProto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>oldArrayProto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arrayMethods <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;push&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shift&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;unshift&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;splice&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arrayMethods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    newArrayProto<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 绑定到Array.prototype上的方法，相当于加一层拦截器，Vue3中用Proxy</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;更新视图操作...&quot;</span><span class="token punctuation">)</span>
        oldArrayProto<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">observer</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> target <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> newArrayProto<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 递归深度监听，处理嵌套对象</span>
                <span class="token function">observer</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">defineReactive</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 响应式数据处理</span>
<span class="token keyword">function</span> <span class="token function">defineReactive</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;更新视图操作...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 变成响应式数据</span>
<span class="token function">observer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

data<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>局限性：</p> <p>在删除或者添加对象属性时(<code>delete data.age</code>,<code>data.test = &quot;...&quot;</code>)，<code>Object.defineProperty</code>无法处理</p> <p>解决方案：</p> <p>使用<code>Vue.delete</code>和<code>Vue.set</code></p> <h3 id="vue3响应式原理-读了源码的getter-track等方法"><a href="#vue3响应式原理-读了源码的getter-track等方法" class="header-anchor">#</a> Vue3响应式原理（读了源码的getter, track等方法）</h3> <h5 id="核心思想-2"><a href="#核心思想-2" class="header-anchor">#</a> 核心思想</h5> <p>基于effect, track, trigger, Proxy的发布-订阅模式，用es6的Proxy+Reflect实现数据拦截，自动收集依赖+自动通知更新</p> <h5 id="实现-2"><a href="#实现-2" class="header-anchor">#</a> 实现</h5> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">reactive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">track</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token comment">// 属性被get时，触发track方法</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token comment">// 将Proxy中的receiver传入Reflect，保证Reflect中的this指向的是Proxy代理的对象</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span>
            Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
            <span class="token comment">// 属性被set后（重点），调用trigger方法触发依赖更新</span>
            <span class="token comment">// FIXME: 一定要先Reflect.set再trigger，否则trigger触发的effect使用的值是更新前的</span>
            <span class="token function">trigger</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 1. 使用reactive</span>
<span class="token comment">// const ref = (initValue) =&gt; {</span>
<span class="token comment">//     return reactive({ value: initValue })</span>
<span class="token comment">// }</span>

<span class="token comment">// 2. 使用对象访问器object accessors(源码方式，优点是除了value，添加其他东西的操作空间更大)</span>
<span class="token keyword">const</span> <span class="token function-variable function">ref</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">raw</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">track</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> raw
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal <span class="token operator">===</span> raw<span class="token punctuation">)</span> <span class="token keyword">return</span>

            raw <span class="token operator">=</span> newVal
            <span class="token function">trigger</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> r
<span class="token punctuation">}</span>

<span class="token keyword">const</span> targetMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// WeakMap可以使用Object作为key</span>
<span class="token keyword">let</span> product <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> salePrice <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">let</span> activeEffect <span class="token operator">=</span> <span class="token keyword">null</span>

<span class="token keyword">const</span> <span class="token function-variable function">effect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">eff</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    activeEffect <span class="token operator">=</span> eff <span class="token comment">// set activeEffect</span>
    <span class="token function">activeEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// run it</span>
    activeEffect <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// unset activeEffect</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">track</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeEffect<span class="token punctuation">)</span> <span class="token keyword">return</span>

    <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        targetMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> depsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> dep <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        depsMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    dep<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activeEffect<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">trigger</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">let</span> dep <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dep<span class="token punctuation">)</span> <span class="token keyword">return</span>

    dep<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">effect</span> <span class="token operator">=&gt;</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> total <span class="token operator">=</span> salePrice<span class="token punctuation">.</span>value <span class="token operator">*</span> product<span class="token punctuation">.</span>quantity <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 通过传参的方式执行副作用函数</span>
<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> salePrice<span class="token punctuation">.</span>value <span class="token operator">=</span> product<span class="token punctuation">.</span>price <span class="token operator">*</span> <span class="token number">0.8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 通过传参的方式执行副作用函数</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">total: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, salePrice: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>salePrice<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// total: 8, salePrice: 4</span>
product<span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">total: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, salePrice: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>salePrice<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// total: 20, salePrice: 4</span>
product<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">total: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, salePrice: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>salePrice<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// total: 40, salePrice: 8, salePrice和total实现了响应式更新</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><h5 id="为什么在proxy拦截的get-set中使用reflect-get-set替代target-key"><a href="#为什么在proxy拦截的get-set中使用reflect-get-set替代target-key" class="header-anchor">#</a> 为什么在Proxy拦截的get/set中使用Reflect.get/set替代target[key]?</h5> <p>简单来说，是为了控制target中this的指向，确保目标代理对象中访问器（getter/setter）使用this时指向的是被Proxy包过的代理对象而非原始对象（指向原始对象无法实现响应式）。Proxy中receiver的作用类似于this，传给Reflect后this就会指向Proxy代理对象，从而形成响应式的逻辑闭环。</p> <p><strong>总而言之，Proxy是为了形成代理可以监听到get set，reflect是为了控制this保证监听一定能触发</strong></p> <h2 id="virtual-dom"><a href="#virtual-dom" class="header-anchor">#</a> Virtual DOM</h2> <p>Vue1.x   没有虚拟DOM，更新时直接操作真实DOM，性能损耗严重</p> <p>Vue2.x  引入虚拟DOM，更重视<strong>js的动态性</strong>，手写render function，对更新性能、初始化性能更友好。</p> <p>更新性能：Diff算法来查找差异</p> <p>使用模板html，内含编译器，以此来检测哪些是静态内容（不变化的）</p> <p>（1）开发者心智负担降低，</p> <p>（2）静态的信息</p> <p>静态节点标注可以加速Diff算法</p> <h4 id="传统操作"><a href="#传统操作" class="header-anchor">#</a> 传统操作</h4> <p>数据改变 → 操作DOM →视图更新</p> <h4 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h4> <p>数据改变 → 虚拟DOM（计算变更） → 操作真实DOM（patch vnode到真实dom树上） → 视图更新</p> <p><strong>总结：使用virtual DOM时，在对比前后节点后，程序会最大限度地寻找并复用老节点中现有的DOM元素，不变的不变，变化的移动或者更新，缺少的补上，多余的删除</strong></p> <p>用js表达DOM结构，结构如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">classname</span><span class="token operator">:</span> <span class="token string">'container'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token operator">...</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="虚拟dom的好处-可以用snabbdom做实验"><a href="#虚拟dom的好处-可以用snabbdom做实验" class="header-anchor">#</a> 虚拟DOM的好处（可以用snabbdom做实验）</h4> <ol><li>在节点更新时，一次性比较并修改真实DOM中需要修改的部分，最后再在真实DOM中进行重排和重绘，减少原本多次重排重绘的性能消耗和对于新dom结构的子节点解析时间</li> <li>虚拟DOM本质是js，因而可以更方便地跨平台操作</li></ol> <h2 id="diff算法"><a href="#diff算法" class="header-anchor">#</a> Diff算法</h2> <h4 id="diff算法简述-虚拟dom的核心"><a href="#diff算法简述-虚拟dom的核心" class="header-anchor">#</a> Diff算法简述（虚拟DOM的核心）</h4> <p><img src="https://cdn.nlark.com/yuque/0/2022/png/12396624/1661506859939-227b0888-9941-41ab-a72e-539fcad61f3c.png#clientId=ud4be444b-5663-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=184&amp;id=u0720fe72&amp;name=diff.png&amp;originHeight=422&amp;originWidth=1085&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=517141&amp;status=done&amp;style=none&amp;taskId=u7157f3e1-f649-4ae5-bf83-25052f0fce1&amp;title=&amp;width=474.3333740234375" alt="diff.png"></p> <h5 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h5> <ol><li>遍历老虚拟dom</li> <li>遍历新虚拟dom</li> <li>重新排序</li></ol> <p>假设有1000个节点，就要计算1000^3次，开销太大！所以Vue中的Diff算法做了优化</p> <h5 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h5> <ol><li>只比较树中同一层级（深度），不跨级比较</li> <li>标签名不同，直接删除，不继续深度比较</li> <li>标签名相同时，key相同，则认为是相同节点，不继续深度比较</li></ol> <p>1000个节点只用计算1000次</p> <h4 id="h函数-生成vnode"><a href="#h函数-生成vnode" class="header-anchor">#</a> h函数（生成VNode）</h4> <p><img src="https://cdn.nlark.com/yuque/0/2022/png/12396624/1661506867445-cf21f0ac-da68-4937-8b65-19ead37e766c.png#clientId=ud4be444b-5663-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=180&amp;id=u1513e7df&amp;name=h%E5%87%BD%E6%95%B0.png&amp;originHeight=168&amp;originWidth=447&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=7586&amp;status=done&amp;style=none&amp;taskId=uf2ca3d00-2dff-4fa1-8169-1e5cee38e6f&amp;title=&amp;width=478" alt="h函数.png"></p> <p>sel：选择器，data：属性值，children：子节点</p> <h4 id="patch函数-对于vnode关联上dom元素-并插入新的dom-删除旧的dom"><a href="#patch函数-对于vnode关联上dom元素-并插入新的dom-删除旧的dom" class="header-anchor">#</a> patch函数（对于vNode关联上DOM元素，并插入新的DOM，删除旧的DOM）</h4> <h5 id="执行时期"><a href="#执行时期" class="header-anchor">#</a> 执行时期</h5> <ol><li>首次渲染时把vNode给patch上去</li> <li>在diff时把新的vNode给patch上去</li></ol> <h5 id="patchvnode"><a href="#patchvnode" class="header-anchor">#</a> patchVNode</h5> <ol><li>关联DOM</li> <li>判断新旧vNode结构异同</li></ol> <h2 id="vue3特性"><a href="#vue3特性" class="header-anchor">#</a> Vue3特性</h2> <h3 id="composition-api"><a href="#composition-api" class="header-anchor">#</a> Composition API</h3> <h4 id="_1-setup-函数-vue2-x中写在method和data中的可以写在里面"><a href="#_1-setup-函数-vue2-x中写在method和data中的可以写在里面" class="header-anchor">#</a> 1. setup()函数 -&gt; Vue2.x中写在method和data中的可以写在里面</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>defineComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// created实例被完全初始化之前</span>
	<span class="token function">setup</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="setup函数的执行时期"><a href="#setup函数的执行时期" class="header-anchor">#</a> setup函数的执行时期</h6> <p><img src="https://cdn.nlark.com/yuque/0/2022/png/12396624/1661506910588-cfc1d3f8-3f97-4782-8d11-a28659e0ab40.png#clientId=ud4be444b-5663-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=265&amp;id=u7a7fc80e&amp;name=Vue2%2C3%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%AF%B9%E6%AF%94.png&amp;originHeight=397&amp;originWidth=1064&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=16491&amp;status=done&amp;style=none&amp;taskId=u1f4ec876-8a6b-44f7-87f8-c1429594ec2&amp;title=&amp;width=709.3333333333334" alt="Vue2,3生命周期对比.png"></p> <h4 id="_2-ref-reactive-实现响应式引用-通过vue3包了一层proxy实现响应式"><a href="#_2-ref-reactive-实现响应式引用-通过vue3包了一层proxy实现响应式" class="header-anchor">#</a> 2. ref() reactive()实现响应式引用(通过Vue3包了一层Proxy实现响应式)</h4> <p>ref: Proxy({value: xxx})这样</p> <p>ref用于基本数据类型(number, boolean, string, null, undefined)</p> <p>reactive用于引用数据类型(Object，其中包含Function, Array, Date)</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> defineComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token operator">...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function">setup</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            temp<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">2</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_3-torefs-实现响应式解构赋值"><a href="#_3-torefs-实现响应式解构赋值" class="header-anchor">#</a> 3. toRefs()实现响应式解构赋值</h4></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上一次更新: :</span> <span class="time">9/6/2022, 3:39:30 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.1ee1e97c.js" defer></script><script src="/blog/assets/js/2.dc5a3d57.js" defer></script><script src="/blog/assets/js/12.c58279b7.js" defer></script>
  </body>
</html>
